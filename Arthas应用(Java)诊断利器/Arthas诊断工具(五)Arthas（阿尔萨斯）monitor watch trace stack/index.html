<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"yuanxw.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.24.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":5,"unescape":false,"preload":false}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="æ–¹æ³•æ‰§è¡Œç›‘æ§">
<meta property="og:type" content="article">
<meta property="og:title" content="Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor&#x2F;watch&#x2F;trace&#x2F;stack&#x2F;ttç›¸å…³å‘½ä»¤">
<meta property="og:url" content="https://yuanxw.github.io/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E4%BA%94)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor%20watch%20trace%20stack/index.html">
<meta property="og:site_name" content="æˆ‘çš„åšå®¢">
<meta property="og:description" content="æ–¹æ³•æ‰§è¡Œç›‘æ§">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-04T16:00:00.000Z">
<meta property="article:modified_time" content="2025-09-03T15:50:23.905Z">
<meta property="article:author" content="Panda Yuan">
<meta property="article:tag" content="Arthas">
<meta property="article:tag" content="Arthasè¯Šæ–­å·¥å…·">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://yuanxw.github.io/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E4%BA%94)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor%20watch%20trace%20stack/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://yuanxw.github.io/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E4%BA%94)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor%20watch%20trace%20stack/","path":"Arthasåº”ç”¨(Java)è¯Šæ–­åˆ©å™¨/Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor watch trace stack/","title":"Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor/watch/trace/stack/ttç›¸å…³å‘½ä»¤"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor/watch/trace/stack/ttç›¸å…³å‘½ä»¤ | æˆ‘çš„åšå®¢</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.9.0/mermaid.min.js","integrity":"sha256-Cz7UN0EXNjgV2u/a38wg/3BNfdRRO1XtgDq93L2GqJg="}}</script>
  <script src="/js/third-party/tags/mermaid.js" defer></script>



  <script src="/js/third-party/pace.js" defer></script>


  




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/3.0.1/quicklink.umd.js" integrity="sha256-44BednzIpUeQJcY8qtLyarFu0UCCTbgmWOvaoehiFQQ=" crossorigin="anonymous" defer></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://yuanxw.github.io/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E4%BA%94)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor%20watch%20trace%20stack/"}</script>
  <script src="/js/third-party/quicklink.js" defer></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="æˆ‘çš„åšå®¢" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">æˆ‘çš„åšå®¢</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7-%E4%BA%94-Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor-watch-trace-stack-tt%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="nav-number">1.</span> <span class="nav-text">Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor&#x2F;watch&#x2F;trace&#x2F;stack&#x2F;ttç›¸å…³å‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-monitor%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.</span> <span class="nav-text">1. monitorå‘½ä»¤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-watch%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.</span> <span class="nav-text">2. watchå‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E8%A7%82%E5%AF%9F%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%94%E5%9B%9E%E6%97%B6%E7%9A%84%E5%8F%82%E6%95%B0%E3%80%81this-%E5%AF%B9%E8%B1%A1%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 è§‚å¯Ÿå‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„å‚æ•°ã€this å¯¹è±¡å’Œè¿”å›å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E8%B0%83%E6%95%B4-x%E7%9A%84%E5%80%BC%EF%BC%8C%E8%A7%82%E5%AF%9F%E5%85%B7%E4%BD%93%E7%9A%84%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%80%BC"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 è°ƒæ•´-xçš„å€¼ï¼Œè§‚å¯Ÿå…·ä½“çš„å‡½æ•°å‚æ•°å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 æ¡ä»¶è¡¨è¾¾å¼çš„ä¾‹å­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-trace%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.</span> <span class="nav-text">3. traceå‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-trace%E4%B8%8D%E5%B8%A6%E5%8F%82%E6%95%B0%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 traceä¸å¸¦å‚æ•°å‘½ä»¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-trace%E5%B8%A6%E5%8F%82%E6%95%B0%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 traceå¸¦å‚æ•°å‘½ä»¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E6%A0%B9%E6%8D%AE%E8%B0%83%E7%94%A8%E8%80%97%E6%97%B6%E8%BF%87%E6%BB%A4"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 æ ¹æ®è°ƒç”¨è€—æ—¶è¿‡æ»¤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-stack%E5%91%BD%E4%BB%A4"><span class="nav-number">1.4.</span> <span class="nav-text">4. stackå‘½ä»¤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-tt%E5%91%BD%E4%BB%A4"><span class="nav-number">1.5.</span> <span class="nav-text">5. ttå‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%EF%BC%9Att-t-demo-MathGame-primeFactors"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1 æ‰§è¡Œå‘½ä»¤ï¼štt -t demo.MathGame primeFactors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E6%9F%A5%E7%9C%8B%E8%B0%83%E7%94%A8%E4%BF%A1%E6%81%AF"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2 æŸ¥çœ‹è°ƒç”¨ä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E9%87%8D%E5%81%9A%E4%B8%80%E6%AC%A1%E8%B0%83%E7%94%A8"><span class="nav-number">1.5.3.</span> <span class="nav-text">5.3 é‡åšä¸€æ¬¡è°ƒç”¨</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Panda Yuan"
      src="/images/gongfu_panda.jpg">
  <p class="site-author-name" itemprop="name">Panda Yuan</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">64</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yuanxw" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;yuanxw" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yuanxiongw@126.com" title="E-Mail â†’ mailto:yuanxiongw@126.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yuanxw.github.io/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E4%BA%94)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89monitor%20watch%20trace%20stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/gongfu_panda.jpg">
      <meta itemprop="name" content="Panda Yuan">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æˆ‘çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor&#x2F;watch&#x2F;trace&#x2F;stack&#x2F;ttç›¸å…³å‘½ä»¤ | æˆ‘çš„åšå®¢">
      <meta itemprop="description" content="æ–¹æ³•æ‰§è¡Œç›‘æ§">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor/watch/trace/stack/ttç›¸å…³å‘½ä»¤
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-03-05 00:00:00" itemprop="dateCreated datePublished" datetime="2023-03-05T00:00:00+08:00">2023-03-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-03 23:50:23" itemprop="dateModified" datetime="2025-09-03T23:50:23+08:00">2025-09-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Arthas/" itemprop="url" rel="index"><span itemprop="name">Arthas</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">æ–¹æ³•æ‰§è¡Œç›‘æ§</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Arthasè¯Šæ–­å·¥å…·-äº”-Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor-watch-trace-stack-ttç›¸å…³å‘½ä»¤"><a href="#Arthasè¯Šæ–­å·¥å…·-äº”-Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor-watch-trace-stack-ttç›¸å…³å‘½ä»¤" class="headerlink" title="Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor&#x2F;watch&#x2F;trace&#x2F;stack&#x2F;ttç›¸å…³å‘½ä»¤"></a>Arthasè¯Šæ–­å·¥å…·(äº”)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰monitor&#x2F;watch&#x2F;trace&#x2F;stack&#x2F;ttç›¸å…³å‘½ä»¤</h1><h2 id="1-monitorå‘½ä»¤"><a href="#1-monitorå‘½ä»¤" class="headerlink" title="1. monitorå‘½ä»¤"></a>1. <strong>monitorå‘½ä»¤</strong></h2><p>æ–¹æ³•æ‰§è¡Œç›‘æ§</p>
<p>å¯¹åŒ¹é…Â <code>class-pattern</code>ï¼<code>method-pattern</code>ï¼<code>condition-express</code>çš„ç±»ã€æ–¹æ³•çš„è°ƒç”¨è¿›è¡Œç›‘æ§ã€‚</p>
<p><code>monitor</code>Â å‘½ä»¤æ˜¯ä¸€ä¸ªéå®æ—¶è¿”å›å‘½ä»¤.</p>
<p>å®æ—¶è¿”å›å‘½ä»¤æ˜¯è¾“å…¥ä¹‹åç«‹å³è¿”å›ï¼Œè€Œéå®æ—¶è¿”å›çš„å‘½ä»¤ï¼Œåˆ™æ˜¯ä¸æ–­çš„ç­‰å¾…ç›®æ ‡ Java è¿›ç¨‹è¿”å›ä¿¡æ¯ï¼Œç›´åˆ°ç”¨æˆ·è¾“å…¥Â <code>Ctrl+C</code>Â ä¸ºæ­¢ã€‚</p>
<p>æœåŠ¡ç«¯æ˜¯ä»¥ä»»åŠ¡çš„å½¢å¼åœ¨åå°è·‘ä»»åŠ¡ï¼Œæ¤å…¥çš„ä»£ç éšç€ä»»åŠ¡çš„ä¸­æ­¢è€Œä¸ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥ä»»åŠ¡å…³é—­åï¼Œä¸ä¼šå¯¹åŸæœ‰æ€§èƒ½äº§ç”Ÿå¤ªå¤§å½±å“ï¼Œè€Œä¸”åŸåˆ™ä¸Šï¼Œä»»ä½• Arthas å‘½ä»¤ä¸ä¼šå¼•èµ·åŸæœ‰ä¸šåŠ¡é€»è¾‘çš„æ”¹å˜ã€‚</p>
<ul>
<li><strong>å‚æ•°è¯´æ˜</strong></li>
</ul>
<p>æ–¹æ³•æ‹¥æœ‰ä¸€ä¸ªå‘½åå‚æ•°Â <code>[c:]</code>ï¼Œæ„æ€æ˜¯ç»Ÿè®¡å‘¨æœŸï¼ˆcycle of outputï¼‰ï¼Œæ‹¥æœ‰ä¸€ä¸ªæ•´å‹çš„å‚æ•°å€¼</p>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><em>class-pattern</em></td>
<td>ç±»åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>method-pattern</em></td>
<td>æ–¹æ³•åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>condition-express</em></td>
<td>æ¡ä»¶è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>[E]</td>
<td>å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é…</td>
</tr>
<tr>
<td><code>[c:]</code></td>
<td>ç»Ÿè®¡å‘¨æœŸï¼Œé»˜è®¤å€¼ä¸º 120 ç§’</td>
</tr>
<tr>
<td>[b]</td>
<td>åœ¨<strong>æ–¹æ³•è°ƒç”¨ä¹‹å‰</strong>è®¡ç®— condition-express</td>
</tr>
<tr>
<td><code>[m &lt;arg&gt;]</code></td>
<td>æŒ‡å®š Class æœ€å¤§åŒ¹é…æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º 50ã€‚é•¿æ ¼å¼ä¸º<code>[maxMatch &lt;arg&gt;]</code></td>
</tr>
</tbody></table>
<ul>
<li><strong>ç›‘æ§çš„ç»´åº¦è¯´æ˜</strong></li>
</ul>
<table>
<thead>
<tr>
<th>ç›‘æ§é¡¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>timestamp</td>
<td>æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>class</td>
<td>Java ç±»</td>
</tr>
<tr>
<td>method</td>
<td>æ–¹æ³•ï¼ˆæ„é€ æ–¹æ³•ã€æ™®é€šæ–¹æ³•ï¼‰</td>
</tr>
<tr>
<td>total</td>
<td>è°ƒç”¨æ¬¡æ•°</td>
</tr>
<tr>
<td>success</td>
<td>æˆåŠŸæ¬¡æ•°</td>
</tr>
<tr>
<td>fail</td>
<td>å¤±è´¥æ¬¡æ•°</td>
</tr>
<tr>
<td>rt</td>
<td>å¹³å‡ RT</td>
</tr>
<tr>
<td>fail-rate</td>
<td>å¤±è´¥ç‡</td>
</tr>
</tbody></table>
<ul>
<li>ç›‘æ§<code>demo.MathGame primeFactors</code>ï¼Œæ¯5ç§’è¿”å›ä¸€ä¸ªç»“æœ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[arthas@8161]$ monitor demo.MathGame primeFactors -c 5</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 204 ms, listenerId: 1</span><br><span class="line"> timestamp                                 class                                                         method                                                        total                success              fail                avg-rt(ms)           fail-rate           </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"> 2025-06-07 05:32:53.378                   demo.MathGame                                                 primeFactors                                                  5                    1                    4                   3.12                 80.00%              </span><br><span class="line"></span><br><span class="line"> timestamp                                 class                                                         method                                                        total                success              fail                avg-rt(ms)           fail-rate           </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"> 2025-06-07 05:32:58.441                   demo.MathGame                                                 primeFactors                                                  5                    0                    5                   0.17                 100.00%             </span><br><span class="line"></span><br><span class="line"> timestamp                                 class                                                         method                                                        total                success              fail                avg-rt(ms)           fail-rate           </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"> 2025-06-07 05:33:02.655                   demo.MathGame                                                 primeFactors                                                  4                    3                    1                   0.16                 25.00%              </span><br><span class="line"></span><br><span class="line"> timestamp                                 class                                                         method                                                        total                success              fail                avg-rt(ms)           fail-rate           </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"> 2025-06-07 05:33:07.664                   demo.MathGame                                                 primeFactors                                                  5                    2                    3                   0.96                 60.00%              </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-watchå‘½ä»¤"><a href="#2-watchå‘½ä»¤" class="headerlink" title="2. watchå‘½ä»¤"></a>2. <strong>watchå‘½ä»¤</strong></h2><p>å‡½æ•°æ‰§è¡Œæ•°æ®è§‚æµ‹</p>
<p>è®©ä½ èƒ½æ–¹ä¾¿çš„è§‚å¯Ÿåˆ°æŒ‡å®šå‡½æ•°çš„è°ƒç”¨æƒ…å†µã€‚èƒ½è§‚å¯Ÿåˆ°çš„èŒƒå›´ä¸ºï¼š<code>è¿”å›å€¼</code>ã€<code>æŠ›å‡ºå¼‚å¸¸</code>ã€<code>å…¥å‚</code>ï¼Œé€šè¿‡ç¼–å†™ OGNL è¡¨è¾¾å¼è¿›è¡Œå¯¹åº”å˜é‡çš„æŸ¥çœ‹ã€‚</p>
<ul>
<li><strong>å‚æ•°è¯´æ˜</strong></li>
</ul>
<p>watch çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèƒ½åœ¨ 4 ä¸ªä¸åŒçš„åœºæ™¯è§‚å¯Ÿå¯¹è±¡</p>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><em>class-pattern</em></td>
<td>ç±»åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>method-pattern</em></td>
<td>å‡½æ•°åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>express</em></td>
<td>è§‚å¯Ÿè¡¨è¾¾å¼ï¼Œé»˜è®¤å€¼ï¼š<code>&#123;params, target, returnObj&#125;</code></td>
</tr>
<tr>
<td><em>condition-express</em></td>
<td>æ¡ä»¶è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>[b]</td>
<td>åœ¨<strong>å‡½æ•°è°ƒç”¨ä¹‹å‰</strong>è§‚å¯Ÿ</td>
</tr>
<tr>
<td>[e]</td>
<td>åœ¨<strong>å‡½æ•°å¼‚å¸¸ä¹‹å</strong>è§‚å¯Ÿ</td>
</tr>
<tr>
<td>[s]</td>
<td>åœ¨<strong>å‡½æ•°è¿”å›ä¹‹å</strong>è§‚å¯Ÿ</td>
</tr>
<tr>
<td>[f]</td>
<td>åœ¨<strong>å‡½æ•°ç»“æŸä¹‹å</strong>(æ­£å¸¸è¿”å›å’Œå¼‚å¸¸è¿”å›)è§‚å¯Ÿ</td>
</tr>
<tr>
<td>[E]</td>
<td>å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é…</td>
</tr>
<tr>
<td>[x:]</td>
<td>æŒ‡å®šè¾“å‡ºç»“æœçš„å±æ€§éå†æ·±åº¦ï¼Œé»˜è®¤ä¸º 1ï¼Œæœ€å¤§å€¼æ˜¯ 4</td>
</tr>
<tr>
<td><code>[m &lt;arg&gt;]</code></td>
<td>æŒ‡å®š Class æœ€å¤§åŒ¹é…æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º 50ã€‚é•¿æ ¼å¼ä¸º<code>[maxMatch &lt;arg&gt;]</code>ã€‚</td>
</tr>
</tbody></table>
<p>è¿™é‡Œé‡ç‚¹è¦è¯´æ˜çš„æ˜¯è§‚å¯Ÿè¡¨è¾¾å¼ï¼Œè§‚å¯Ÿè¡¨è¾¾å¼çš„æ„æˆä¸»è¦ç”± ognl è¡¨è¾¾å¼ç»„æˆï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·å†™<code>&quot;&#123;params,returnObj&#125;&quot;</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ªåˆæ³•çš„ ognl è¡¨è¾¾å¼ï¼Œéƒ½èƒ½è¢«æ­£å¸¸æ”¯æŒã€‚</p>
<p>è§‚å¯Ÿçš„ç»´åº¦ä¹Ÿæ¯”è¾ƒå¤šï¼Œä¸»è¦ä½“ç°åœ¨å‚æ•°Â <code>advice</code>Â çš„æ•°æ®ç»“æ„ä¸Šã€‚<code>Advice</code>Â å‚æ•°æœ€ä¸»è¦æ˜¯å°è£…äº†é€šçŸ¥èŠ‚ç‚¹çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/advice-class.html"><strong>è¡¨è¾¾å¼æ ¸å¿ƒå˜é‡</strong></a>ä¸­å…³äºè¯¥èŠ‚ç‚¹çš„æè¿°ã€‚</p>
<ul>
<li>ç‰¹æ®Šç”¨æ³•è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/71"><strong>https://github.com/alibaba/arthas/issues/71</strong></a></li>
<li>OGNL è¡¨è¾¾å¼å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://commons.apache.org/dormant/commons-ognl/language-guide.html"><strong>https://commons.apache.org/dormant/commons-ognl/language-guide.html</strong></a></li>
</ul>
<p><strong>ç‰¹åˆ«è¯´æ˜</strong>ï¼š</p>
<ul>
<li>watch å‘½ä»¤å®šä¹‰äº† 4 ä¸ªè§‚å¯Ÿäº‹ä»¶ç‚¹ï¼Œå³Â <code>b</code>Â å‡½æ•°è°ƒç”¨å‰ï¼Œ<code>e</code>Â å‡½æ•°å¼‚å¸¸åï¼Œ<code>s</code>Â å‡½æ•°è¿”å›åï¼Œ<code>f</code>Â å‡½æ•°ç»“æŸå</li>
<li>4 ä¸ªè§‚å¯Ÿäº‹ä»¶ç‚¹Â <code>b</code>ã€<code>e</code>ã€<code>s</code>Â é»˜è®¤å…³é—­ï¼Œ<code>f</code>Â é»˜è®¤æ‰“å¼€ï¼Œå½“æŒ‡å®šè§‚å¯Ÿç‚¹è¢«æ‰“å¼€åï¼Œåœ¨ç›¸åº”äº‹ä»¶ç‚¹ä¼šå¯¹è§‚å¯Ÿè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼å¹¶è¾“å‡º</li>
<li>è¿™é‡Œè¦æ³¨æ„<code>å‡½æ•°å…¥å‚</code>å’Œ<code>å‡½æ•°å‡ºå‚</code>çš„åŒºåˆ«ï¼Œæœ‰å¯èƒ½åœ¨ä¸­é—´è¢«ä¿®æ”¹å¯¼è‡´å‰åä¸ä¸€è‡´ï¼Œé™¤äº†Â <code>b</code>Â äº‹ä»¶ç‚¹Â <code>params</code>Â ä»£è¡¨å‡½æ•°å…¥å‚å¤–ï¼Œå…¶ä½™äº‹ä»¶éƒ½ä»£è¡¨å‡½æ•°å‡ºå‚</li>
<li>å½“ä½¿ç”¨Â <code>b</code>Â æ—¶ï¼Œç”±äºè§‚å¯Ÿäº‹ä»¶ç‚¹æ˜¯åœ¨å‡½æ•°è°ƒç”¨å‰ï¼Œæ­¤æ—¶è¿”å›å€¼æˆ–å¼‚å¸¸å‡ä¸å­˜åœ¨</li>
<li>åœ¨ watch å‘½ä»¤çš„ç»“æœé‡Œï¼Œä¼šæ‰“å°å‡º<code>location</code>ä¿¡æ¯ã€‚<code>location</code>æœ‰ä¸‰ç§å¯èƒ½å€¼ï¼š<code>AtEnter</code>ï¼Œ<code>AtExit</code>ï¼Œ<code>AtExceptionExit</code>ã€‚å¯¹åº”å‡½æ•°å…¥å£ï¼Œå‡½æ•°æ­£å¸¸ returnï¼Œå‡½æ•°æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<h3 id="2-1-è§‚å¯Ÿå‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„å‚æ•°ã€this-å¯¹è±¡å’Œè¿”å›å€¼"><a href="#2-1-è§‚å¯Ÿå‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„å‚æ•°ã€this-å¯¹è±¡å’Œè¿”å›å€¼" class="headerlink" title="2.1 è§‚å¯Ÿå‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„å‚æ•°ã€this å¯¹è±¡å’Œè¿”å›å€¼"></a><strong>2.1 è§‚å¯Ÿå‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„å‚æ•°ã€this å¯¹è±¡å’Œè¿”å›å€¼</strong></h3><p>è§‚å¯Ÿè¡¨è¾¾å¼ï¼Œé»˜è®¤å€¼æ˜¯<code>&#123;params, target, returnObj&#125;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[arthas@<span class="number">8161</span>]$ watch demo.MathGame primeFactors -x <span class="number">2</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">73</span> ms, listenerId: <span class="number">2</span></span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">51</span>:<span class="number">10.663</span>; [cost=<span class="number">1.</span>015159ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Object</span>[][</span><br><span class="line">        <span class="meta">@Integer</span>[-<span class="number">93162</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="meta">@MathGame</span>[</span><br><span class="line">        random=<span class="meta">@Random</span>[java.util.Random@51efea79],</span><br><span class="line">        illegalArgumentCount=<span class="meta">@Integer</span>[<span class="number">2327</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">]</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">48</span>:<span class="number">55.377</span>; [cost=<span class="number">0.</span>064295ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Object</span>[][</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">1</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="meta">@MathGame</span>[</span><br><span class="line">        random=<span class="meta">@Random</span>[java.util.Random@51efea79],</span><br><span class="line">        illegalArgumentCount=<span class="meta">@Integer</span>[<span class="number">2256</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="meta">@ArrayList</span>[</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">2</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">3</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">13</span>],</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">41</span>],</span><br><span class="line">    ],</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šé¢çš„ç»“æœé‡Œï¼Œè¯´æ˜å‡½æ•°è¢«æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡ç»“æœæ˜¯<code>location=AtExceptionExit</code>ï¼Œè¯´æ˜å‡½æ•°æŠ›å‡ºå¼‚å¸¸äº†ï¼Œå› æ­¤<code>returnObj</code>æ˜¯ null</li>
<li>åœ¨ç¬¬äºŒæ¬¡ç»“æœé‡Œæ˜¯<code>location=AtExit</code>ï¼Œè¯´æ˜å‡½æ•°æ­£å¸¸è¿”å›ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°<code>returnObj</code>ç»“æœæ˜¯ä¸€ä¸ª ArrayList</li>
</ul>
<h3 id="2-2-è°ƒæ•´-xçš„å€¼ï¼Œè§‚å¯Ÿå…·ä½“çš„å‡½æ•°å‚æ•°å€¼"><a href="#2-2-è°ƒæ•´-xçš„å€¼ï¼Œè§‚å¯Ÿå…·ä½“çš„å‡½æ•°å‚æ•°å€¼" class="headerlink" title="2.2 è°ƒæ•´-xçš„å€¼ï¼Œè§‚å¯Ÿå…·ä½“çš„å‡½æ•°å‚æ•°å€¼"></a><strong>2.2 è°ƒæ•´<code>-x</code>çš„å€¼ï¼Œè§‚å¯Ÿå…·ä½“çš„å‡½æ•°å‚æ•°å€¼</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">[arthas@<span class="number">8161</span>]$ watch demo.MathGame primeFactors <span class="string">&quot;&#123;params,target&#125;&quot;</span> -x <span class="number">3</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">69</span> ms, listenerId: <span class="number">4</span></span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">52</span>:<span class="number">36.258</span>; [cost=<span class="number">0.</span>313869ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Object</span>[][</span><br><span class="line">        <span class="meta">@Integer</span>[-<span class="number">162367</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="meta">@MathGame</span>[</span><br><span class="line">        random=<span class="meta">@Random</span>[</span><br><span class="line">            serialVersionUID=<span class="meta">@Long</span>[<span class="number">3905348978240129619</span>],</span><br><span class="line">            seed=<span class="meta">@AtomicLong</span>[<span class="number">175065596875740</span>],</span><br><span class="line">            multiplier=<span class="meta">@Long</span>[<span class="number">25214903917</span>],</span><br><span class="line">            addend=<span class="meta">@Long</span>[<span class="number">11</span>],</span><br><span class="line">            mask=<span class="meta">@Long</span>[<span class="number">281474976710655</span>],</span><br><span class="line">            DOUBLE_UNIT=<span class="meta">@Double</span>[<span class="number">1.1102230246251565E-16</span>],</span><br><span class="line">            BadBound=<span class="meta">@String</span>[bound must be positive],</span><br><span class="line">            BadRange=<span class="meta">@String</span>[bound must be greater than origin],</span><br><span class="line">            BadSize=<span class="meta">@String</span>[size must be non-negative],</span><br><span class="line">            seedUniquifier=<span class="meta">@AtomicLong</span>[-<span class="number">2942033378085796212</span>],</span><br><span class="line">            nextNextGaussian=<span class="meta">@Double</span>[<span class="number">0.0</span>],</span><br><span class="line">            haveNextNextGaussian=<span class="meta">@Boolean</span>[<span class="literal">false</span>],</span><br><span class="line">            serialPersistentFields=<span class="meta">@ObjectStreamField</span>[][isEmpty=<span class="literal">false</span>;size=<span class="number">3</span>],</span><br><span class="line">            unsafe=<span class="meta">@Unsafe</span>[jdk.internal.misc.Unsafe@5419f379],</span><br><span class="line">            seedOffset=<span class="meta">@Long</span>[<span class="number">24</span>],</span><br><span class="line">        ],</span><br><span class="line">        illegalArgumentCount=<span class="meta">@Integer</span>[<span class="number">2371</span>],</span><br><span class="line">    ],</span><br><span class="line">]</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">52</span>:<span class="number">37.298</span>; [cost=<span class="number">0.</span>214619ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Object</span>[][</span><br><span class="line">        <span class="meta">@Integer</span>[<span class="number">1</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="meta">@MathGame</span>[</span><br><span class="line">        random=<span class="meta">@Random</span>[</span><br><span class="line">            serialVersionUID=<span class="meta">@Long</span>[<span class="number">3905348978240129619</span>],</span><br><span class="line">            seed=<span class="meta">@AtomicLong</span>[<span class="number">102106958650551</span>],</span><br><span class="line">            multiplier=<span class="meta">@Long</span>[<span class="number">25214903917</span>],</span><br><span class="line">            addend=<span class="meta">@Long</span>[<span class="number">11</span>],</span><br><span class="line">            mask=<span class="meta">@Long</span>[<span class="number">281474976710655</span>],</span><br><span class="line">            DOUBLE_UNIT=<span class="meta">@Double</span>[<span class="number">1.1102230246251565E-16</span>],</span><br><span class="line">            BadBound=<span class="meta">@String</span>[bound must be positive],</span><br><span class="line">            BadRange=<span class="meta">@String</span>[bound must be greater than origin],</span><br><span class="line">            BadSize=<span class="meta">@String</span>[size must be non-negative],</span><br><span class="line">            seedUniquifier=<span class="meta">@AtomicLong</span>[-<span class="number">2942033378085796212</span>],</span><br><span class="line">            nextNextGaussian=<span class="meta">@Double</span>[<span class="number">0.0</span>],</span><br><span class="line">            haveNextNextGaussian=<span class="meta">@Boolean</span>[<span class="literal">false</span>],</span><br><span class="line">            serialPersistentFields=<span class="meta">@ObjectStreamField</span>[][isEmpty=<span class="literal">false</span>;size=<span class="number">3</span>],</span><br><span class="line">            unsafe=<span class="meta">@Unsafe</span>[jdk.internal.misc.Unsafe@5419f379],</span><br><span class="line">            seedOffset=<span class="meta">@Long</span>[<span class="number">24</span>],</span><br><span class="line">        ],</span><br><span class="line">        illegalArgumentCount=<span class="meta">@Integer</span>[<span class="number">2371</span>],</span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-3-æ¡ä»¶è¡¨è¾¾å¼çš„ä¾‹å­"><a href="#2-3-æ¡ä»¶è¡¨è¾¾å¼çš„ä¾‹å­" class="headerlink" title="2.3 æ¡ä»¶è¡¨è¾¾å¼çš„ä¾‹å­"></a><strong>2.3 æ¡ä»¶è¡¨è¾¾å¼çš„ä¾‹å­</strong></h3><ul>
<li>åªæœ‰æ»¡è¶³æ¡ä»¶çš„è°ƒç”¨ï¼Œæ‰ä¼šæœ‰å“åº”ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[arthas@<span class="number">8161</span>]$ watch demo.MathGame primeFactors <span class="string">&quot;&#123;params[0],target&#125;&quot;</span> <span class="string">&quot;params[0]&lt;0&quot;</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">70</span> ms, listenerId: <span class="number">5</span></span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">57</span>:<span class="number">45.251</span>; [cost=<span class="number">0.</span>640813ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Integer</span>[-<span class="number">152032</span>],</span><br><span class="line">    <span class="meta">@MathGame</span>[demo.MathGame@589838eb],</span><br><span class="line">]</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">57</span>:<span class="number">49.265</span>; [cost=<span class="number">0.</span>09171ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Integer</span>[-<span class="number">106952</span>],</span><br><span class="line">    <span class="meta">@MathGame</span>[demo.MathGame@589838eb],</span><br><span class="line">]</span><br><span class="line">method=demo.MathGame.primeFactors location=AtExceptionExit</span><br><span class="line">ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">05</span>:<span class="number">57</span>:<span class="number">50.271</span>; [cost=<span class="number">0.</span>058582ms] result=<span class="meta">@ArrayList</span>[</span><br><span class="line">    <span class="meta">@Integer</span>[-<span class="number">181262</span>],</span><br><span class="line">    <span class="meta">@MathGame</span>[demo.MathGame@589838eb],</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-traceå‘½ä»¤"><a href="#3-traceå‘½ä»¤" class="headerlink" title="3. traceå‘½ä»¤"></a>3. <strong>traceå‘½ä»¤</strong></h2><p>æ–¹æ³•å†…éƒ¨è°ƒç”¨è·¯å¾„ï¼Œå¹¶è¾“å‡ºæ–¹æ³•è·¯å¾„ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè€—æ—¶</p>
<p><code>trace</code>Â å‘½ä»¤èƒ½ä¸»åŠ¨æœç´¢Â <code>class-pattern</code>ï¼<code>method-pattern</code>Â å¯¹åº”çš„æ–¹æ³•è°ƒç”¨è·¯å¾„ï¼Œæ¸²æŸ“å’Œç»Ÿè®¡æ•´ä¸ªè°ƒç”¨é“¾è·¯ä¸Šçš„æ‰€æœ‰æ€§èƒ½å¼€é”€å’Œè¿½è¸ªè°ƒç”¨é“¾è·¯ã€‚</p>
<ul>
<li><strong>å‚æ•°è¯´æ˜</strong></li>
</ul>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><em>class-pattern</em></td>
<td>ç±»åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>method-pattern</em></td>
<td>æ–¹æ³•åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>condition-express</em></td>
<td>æ¡ä»¶è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>[E]</td>
<td>å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é…</td>
</tr>
<tr>
<td><code>[n:]</code></td>
<td>å‘½ä»¤æ‰§è¡Œæ¬¡æ•°ï¼Œé»˜è®¤å€¼ä¸º 100ã€‚</td>
</tr>
<tr>
<td><code>#cost</code></td>
<td>æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼Œå•ä½æ¯«ç§’</td>
</tr>
<tr>
<td><code>[m &lt;arg&gt;]</code></td>
<td>æŒ‡å®š Class æœ€å¤§åŒ¹é…æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º 50ã€‚é•¿æ ¼å¼ä¸º<code>[maxMatch &lt;arg&gt;]</code>ã€‚</td>
</tr>
</tbody></table>
<p>è¿™é‡Œé‡ç‚¹è¦è¯´æ˜çš„æ˜¯<code>æ¡ä»¶è¡¨è¾¾å¼</code>ï¼Œ<code>æ¡ä»¶è¡¨è¾¾å¼</code>çš„æ„æˆä¸»è¦ç”± ognl è¡¨è¾¾å¼ç»„æˆï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·å†™<code>&quot;params[0]&lt;0&quot;</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ªåˆæ³•çš„ ognl è¡¨è¾¾å¼ï¼Œéƒ½èƒ½è¢«æ­£å¸¸æ”¯æŒã€‚</p>
<p>è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/advice-class.html"><strong>è¡¨è¾¾å¼æ ¸å¿ƒå˜é‡</strong></a>ä¸­å…³äºè¯¥èŠ‚ç‚¹çš„æè¿°ã€‚</p>
<ul>
<li>ç‰¹æ®Šç”¨æ³•è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/71"><strong>https://github.com/alibaba/arthas/issues/71</strong></a></li>
<li>OGNL è¡¨è¾¾å¼å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://commons.apache.org/dormant/commons-ognl/language-guide.html"><strong>https://commons.apache.org/dormant/commons-ognl/language-guide.html</strong></a></li>
</ul>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªæƒ³çœ‹åˆ°æŸä¸ªæ–¹æ³•çš„ rt å¤§äºæŸä¸ªæ—¶é—´ä¹‹åçš„ trace ç»“æœï¼Œç°åœ¨ Arthas å¯ä»¥æŒ‰ç…§æ–¹æ³•æ‰§è¡Œçš„è€—æ—¶æ¥è¿›è¡Œè¿‡æ»¤äº†ï¼Œä¾‹å¦‚<code>trace *StringUtils isBlank &#39;#cost&gt;100&#39;</code>è¡¨ç¤ºå½“æ‰§è¡Œæ—¶é—´è¶…è¿‡ 100ms çš„æ—¶å€™ï¼Œæ‰ä¼šè¾“å‡º trace çš„ç»“æœã€‚</p>
<p>watch&#x2F;stack&#x2F;trace è¿™ä¸ªä¸‰ä¸ªå‘½ä»¤éƒ½æ”¯æŒ<code>#cost</code></p>
<aside>
ğŸ’¡

<ul>
<li><strong>æ³¨æ„äº‹é¡¹</strong><ol>
<li><p><code>trace</code>Â èƒ½æ–¹ä¾¿çš„å¸®åŠ©ä½ å®šä½å’Œå‘ç°å›  RT é«˜è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ç¼ºé™·ï¼Œä½†å…¶æ¯æ¬¡åªèƒ½è·Ÿè¸ªä¸€çº§æ–¹æ³•çš„è°ƒç”¨é“¾è·¯ã€‚</p>
<p> å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/597"><strong>Trace å‘½ä»¤çš„å®ç°åŸç†åœ¨æ–°çª—å£æ‰“å¼€</strong></a></p>
</li>
<li><p>3.3.0 ç‰ˆæœ¬åï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€ Trace åŠŸèƒ½ï¼Œä¸æ–­å¢åŠ æ–°çš„åŒ¹é…ç±»ï¼Œå‚è€ƒä¸‹é¢çš„ç¤ºä¾‹ã€‚</p>
</li>
<li><p>ç›®å‰ä¸æ”¯æŒÂ <code>trace java.lang.Thread getName</code>ï¼Œå‚è€ƒ issue:Â <a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/1610"><strong>#1610åœ¨æ–°çª—å£æ‰“å¼€</strong></a>Â ï¼Œè€ƒè™‘åˆ°ä¸æ˜¯éå¸¸å¿…è¦åœºæ™¯ï¼Œä¸”ä¿®å¤æœ‰ä¸€å®šéš¾åº¦ï¼Œå› æ­¤å½“å‰æš‚ä¸ä¿®å¤</p>
</li>
</ol>
</li>
</ul>
</aside>

<h3 id="3-1-traceä¸å¸¦å‚æ•°å‘½ä»¤"><a href="#3-1-traceä¸å¸¦å‚æ•°å‘½ä»¤" class="headerlink" title="3.1 traceä¸å¸¦å‚æ•°å‘½ä»¤"></a><strong>3.1 traceä¸å¸¦å‚æ•°å‘½ä»¤</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[arthas@<span class="number">8161</span>]$ trace demo.MathGame run</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">100</span> ms, listenerId: <span class="number">6</span></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">06</span>:<span class="number">02</span>:<span class="number">53.872</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">1.</span>431047ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">17.69</span>% <span class="number">0.</span>25315ms ] demo.MathGame:primeFactors() #<span class="number">24</span></span><br><span class="line">        `---[<span class="number">38.56</span>% <span class="number">0.</span>551755ms ] demo.MathGame:print() #<span class="number">25</span></span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">06</span>:<span class="number">02</span>:<span class="number">54.895</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">0.</span>421141ms] demo.MathGame:run()</span><br><span class="line">        `---[<span class="number">42.03</span>% <span class="number">0.</span>177003ms ] demo.MathGame:primeFactors() #<span class="number">24</span> [<span class="keyword">throws</span> Exception]</span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> <span class="number">06</span>:<span class="number">02</span>:<span class="number">55.897</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">0.</span>108631ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">21.72</span>% <span class="number">0.</span>023592ms ] demo.MathGame:primeFactors() #<span class="number">24</span></span><br><span class="line">        `---[<span class="number">49.07</span>% <span class="number">0.</span>053301ms ] demo.MathGame:print() #<span class="number">25</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç»“æœé‡Œçš„Â <code>#24</code>ï¼Œè¡¨ç¤ºåœ¨ run å‡½æ•°é‡Œï¼Œåœ¨æºæ–‡ä»¶çš„ç¬¬<code>24</code>è¡Œè°ƒç”¨äº†<code>primeFactors()</code>å‡½æ•°ã€‚</p>
<h3 id="3-2-traceå¸¦å‚æ•°å‘½ä»¤"><a href="#3-2-traceå¸¦å‚æ•°å‘½ä»¤" class="headerlink" title="3.2 traceå¸¦å‚æ•°å‘½ä»¤"></a><strong>3.2 traceå¸¦å‚æ•°å‘½ä»¤</strong></h3><ul>
<li><code>-skipJDKMethod &lt;value&gt;</code>Â skip jdk method trace, default value true.</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œtrace ä¸ä¼šåŒ…å« jdk é‡Œçš„å‡½æ•°è°ƒç”¨ï¼Œå¦‚æœå¸Œæœ› trace jdk é‡Œçš„å‡½æ•°ï¼Œéœ€è¦æ˜¾å¼è®¾ç½®<code>--skipJDKMethod false</code>ã€‚</p>
<ul>
<li>å¦‚æœæ–¹æ³•è°ƒç”¨çš„æ¬¡æ•°å¾ˆå¤šï¼Œé‚£ä¹ˆå¯ä»¥ç”¨-nå‚æ•°æŒ‡å®šæ•æ‰ç»“æœçš„æ¬¡æ•°ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œæ•æ‰åˆ°ä¸€æ¬¡è°ƒç”¨å°±é€€å‡ºå‘½ä»¤ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[arthas@<span class="number">8161</span>]$ trace --skipJDKMethod <span class="literal">false</span> demo.MathGame run -n <span class="number">3</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">108</span> ms, listenerId: <span class="number">9</span></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">33</span>:<span class="number">22.964</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    +---[<span class="number">0.</span>040626ms] java.util.Random:nextInt() #<span class="number">23</span></span><br><span class="line">    +---[<span class="number">0.</span>152629ms] demo.MathGame:primeFactors() #<span class="number">24</span></span><br><span class="line">    +---[<span class="number">0.</span>032551ms] demo.MathGame:print() #<span class="number">25</span></span><br><span class="line">    `---[<span class="number">3.</span>440639ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">9.98</span>% <span class="number">0.</span>343288ms ] java.util.Random:nextInt() #<span class="number">23</span></span><br><span class="line">        +---[<span class="number">17.64</span>% <span class="number">0.</span>607089ms ] demo.MathGame:primeFactors() #<span class="number">24</span> [<span class="keyword">throws</span> Exception]</span><br><span class="line">        +---[<span class="number">0.64</span>% <span class="number">0.</span>021935ms ] java.lang.StringBuilder:&lt;init&gt;() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">7.40</span>% <span class="number">0.</span>254695ms ] java.lang.String:format() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">1.37</span>% min=<span class="number">0.</span>01411ms,max=<span class="number">0.</span>03298ms,total=<span class="number">0.</span>04709ms,count=<span class="number">2</span>] java.lang.StringBuilder:append() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">1.20</span>% <span class="number">0.</span>041169ms ] java.lang.Exception:getMessage() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">0.64</span>% <span class="number">0.</span>022185ms ] java.lang.StringBuilder:toString() #<span class="number">28</span></span><br><span class="line">        `---[<span class="number">16.69</span>% <span class="number">0.</span>574324ms ] java.io.PrintStream:println() #<span class="number">28</span></span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">33</span>:<span class="number">25.119</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">1.</span>504503ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">1.70</span>% <span class="number">0.</span>025535ms ] java.util.Random:nextInt() #<span class="number">23</span></span><br><span class="line">        +---[<span class="number">5.34</span>% <span class="number">0.</span>080385ms ] demo.MathGame:primeFactors() #<span class="number">24</span> [<span class="keyword">throws</span> Exception]</span><br><span class="line">        +---[<span class="number">0.97</span>% <span class="number">0.</span>01455ms ] java.lang.StringBuilder:&lt;init&gt;() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">3.14</span>% <span class="number">0.</span>04719ms ] java.lang.String:format() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">1.90</span>% min=<span class="number">0.</span>014215ms,max=<span class="number">0.</span>01436ms,total=<span class="number">0.</span>028575ms,count=<span class="number">2</span>] java.lang.StringBuilder:append() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">7.98</span>% <span class="number">0.</span>12012ms ] java.lang.Exception:getMessage() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">0.88</span>% <span class="number">0.</span>013255ms ] java.lang.StringBuilder:toString() #<span class="number">28</span></span><br><span class="line">        `---[<span class="number">25.35</span>% <span class="number">0.</span>381384ms ] java.io.PrintStream:println() #<span class="number">28</span></span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">33</span>:<span class="number">26.136</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">0.</span>357443ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">2.92</span>% <span class="number">0.</span>01043ms ] java.util.Random:nextInt() #<span class="number">23</span></span><br><span class="line">        +---[<span class="number">12.37</span>% <span class="number">0.</span>044215ms ] demo.MathGame:primeFactors() #<span class="number">24</span> [<span class="keyword">throws</span> Exception]</span><br><span class="line">        +---[<span class="number">1.46</span>% <span class="number">0.</span>00521ms ] java.lang.StringBuilder:&lt;init&gt;() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">9.13</span>% <span class="number">0.</span>032649ms ] java.lang.String:format() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">2.90</span>% min=<span class="number">0.</span>004825ms,max=<span class="number">0.</span>00555ms,total=<span class="number">0.</span>010375ms,count=<span class="number">2</span>] java.lang.StringBuilder:append() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">1.49</span>% <span class="number">0.</span>00532ms ] java.lang.Exception:getMessage() #<span class="number">28</span></span><br><span class="line">        +---[<span class="number">1.34</span>% <span class="number">0.</span>004785ms ] java.lang.StringBuilder:toString() #<span class="number">28</span></span><br><span class="line">        `---[<span class="number">18.75</span>% <span class="number">0.</span>067035ms ] java.io.PrintStream:println() #<span class="number">28</span></span><br><span class="line"></span><br><span class="line">Command execution times exceed limit: <span class="number">3</span>, so command will exit. You can set it with -n option.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-3-æ ¹æ®è°ƒç”¨è€—æ—¶è¿‡æ»¤"><a href="#3-3-æ ¹æ®è°ƒç”¨è€—æ—¶è¿‡æ»¤" class="headerlink" title="3.3 æ ¹æ®è°ƒç”¨è€—æ—¶è¿‡æ»¤"></a><strong>3.3 æ ¹æ®è°ƒç”¨è€—æ—¶è¿‡æ»¤</strong></h3><p>åªä¼šå±•ç¤ºè€—æ—¶å¤§äº 2ms çš„è°ƒç”¨è·¯å¾„ï¼Œæœ‰åŠ©äºåœ¨æ’æŸ¥é—®é¢˜çš„æ—¶å€™ï¼Œåªå…³æ³¨å¼‚å¸¸æƒ…å†µ</p>
<aside>
ğŸ’¡

<ul>
<li>æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Œæ²¡é”™ï¼Œåœ¨ JProfiler ç­‰æ”¶è´¹è½¯ä»¶ä¸­ä½ æ›¾ç»è§è¯†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè¿™é‡Œä½ å°†å¯ä»¥é€šè¿‡å‘½ä»¤å°±èƒ½æ‰“å°å‡ºæŒ‡å®šè°ƒç”¨è·¯å¾„ã€‚ å‹æƒ…æé†’ä¸‹ï¼Œ<code>trace</code>Â åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æœ¬èº«æ˜¯ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œåœ¨ç»Ÿè®¡çš„æŠ¥å‘Šä¸­å¹¶æœªåƒ JProfiler ä¸€æ ·é¢„å…ˆå‡å»å…¶è‡ªèº«çš„ç»Ÿè®¡å¼€é”€ã€‚æ‰€ä»¥è¿™ç»Ÿè®¡å‡ºæ¥æœ‰äº›è®¸çš„ä¸å‡†ï¼Œæ¸²æŸ“è·¯å¾„ä¸Šè°ƒç”¨çš„ç±»ã€æ–¹æ³•è¶Šå¤šï¼Œæ€§èƒ½åå·®è¶Šå¤§ã€‚ä½†è¿˜æ˜¯èƒ½è®©ä½ çœ‹æ¸…ä¸€äº›äº‹æƒ…çš„ã€‚</li>
<li>[12.033735ms] çš„å«ä¹‰ï¼Œ<code>12.033735</code>Â çš„å«ä¹‰æ˜¯ï¼šå½“å‰èŠ‚ç‚¹åœ¨å½“å‰æ­¥éª¤çš„è€—æ—¶ï¼Œå•ä½ä¸ºæ¯«ç§’</li>
<li>[0,0,0ms,11]xxx:yyy() [throws Exception]ï¼Œå¯¹è¯¥æ–¹æ³•ä¸­ç›¸åŒçš„æ–¹æ³•è°ƒç”¨è¿›è¡Œäº†åˆå¹¶ï¼Œ<code>0,0,0ms,11</code>Â è¡¨ç¤ºæ–¹æ³•è°ƒç”¨è€—æ—¶ï¼Œ<code>min,max,total,count</code>ï¼›<code>throws Exception</code>Â è¡¨æ˜è¯¥æ–¹æ³•è°ƒç”¨ä¸­å­˜åœ¨å¼‚å¸¸è¿”å›</li>
<li>è¿™é‡Œå­˜åœ¨ä¸€ä¸ªç»Ÿè®¡ä¸å‡†ç¡®çš„é—®é¢˜ï¼Œå°±æ˜¯æ‰€æœ‰æ–¹æ³•è€—æ—¶åŠ èµ·æ¥å¯èƒ½ä¼šå°äºè¯¥ç›‘æµ‹æ–¹æ³•çš„æ€»è€—æ—¶ï¼Œè¿™ä¸ªæ˜¯ç”±äº Arthas æœ¬èº«çš„é€»è¾‘ä¼šæœ‰ä¸€å®šçš„è€—æ—¶</aside></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[arthas@<span class="number">8161</span>]$ trace demo.MathGame run <span class="string">&#x27;#cost &gt; 0.5&#x27;</span> -n <span class="number">3</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(<span class="keyword">class</span> <span class="title class_">count</span>: <span class="number">1</span> , method count: <span class="number">1</span>) cost in <span class="number">87</span> ms, listenerId: <span class="number">12</span></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">36</span>:<span class="number">31.428</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">0.</span>575073ms] demo.MathGame:run()</span><br><span class="line">        `---[<span class="number">56.12</span>% <span class="number">0.</span>322722ms ] demo.MathGame:primeFactors() #<span class="number">24</span> [<span class="keyword">throws</span> Exception]</span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">36</span>:<span class="number">33.467</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">2.</span>125056ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">65.45</span>% <span class="number">1.</span>390877ms ] demo.MathGame:primeFactors() #<span class="number">24</span></span><br><span class="line">        `---[<span class="number">23.98</span>% <span class="number">0.</span>509524ms ] demo.MathGame:print() #<span class="number">25</span></span><br><span class="line"></span><br><span class="line">`---ts=<span class="number">2025</span>-<span class="number">06</span>-<span class="number">07</span> 09:<span class="number">36</span>:<span class="number">37.491</span>;thread_name=main;id=<span class="number">1</span>;is_daemon=<span class="literal">false</span>;priority=<span class="number">5</span>;TCCL=jdk.internal.loader.ClassLoaders$AppClassLoader@4b85612c</span><br><span class="line">    `---[<span class="number">7.</span>300126ms] demo.MathGame:run()</span><br><span class="line">        +---[<span class="number">99.21</span>% <span class="number">7.</span>242667ms ] demo.MathGame:primeFactors() #<span class="number">24</span></span><br><span class="line">        `---[<span class="number">0.44</span>% <span class="number">0.</span>031904ms ] demo.MathGame:print() #<span class="number">25</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-stackå‘½ä»¤"><a href="#4-stackå‘½ä»¤" class="headerlink" title="4. stackå‘½ä»¤"></a>4. <strong>stackå‘½ä»¤</strong></h2><p>è¾“å‡ºå½“å‰æ–¹æ³•è¢«è°ƒç”¨çš„è°ƒç”¨è·¯å¾„</p>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªæ–¹æ³•è¢«æ‰§è¡Œï¼Œä½†è¿™ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„è·¯å¾„éå¸¸å¤šï¼Œæˆ–è€…ä½ æ ¹æœ¬å°±ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•æ˜¯ä»é‚£é‡Œè¢«æ‰§è¡Œäº†ï¼Œæ­¤æ—¶ä½ éœ€è¦çš„æ˜¯ stack å‘½ä»¤ã€‚</p>
<ul>
<li><strong>å‚æ•°è¯´æ˜</strong></li>
</ul>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><em>class-pattern</em></td>
<td>ç±»åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>method-pattern</em></td>
<td>æ–¹æ³•åè¡¨è¾¾å¼åŒ¹é…</td>
</tr>
<tr>
<td><em>condition-express</em></td>
<td>æ¡ä»¶è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>[E]</td>
<td>å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é…</td>
</tr>
<tr>
<td><code>[n:]</code></td>
<td>æ‰§è¡Œæ¬¡æ•°é™åˆ¶</td>
</tr>
<tr>
<td><code>[m &lt;arg&gt;]</code></td>
<td>æŒ‡å®š Class æœ€å¤§åŒ¹é…æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º 50ã€‚é•¿æ ¼å¼ä¸º<code>[maxMatch &lt;arg&gt;]</code>ã€‚</td>
</tr>
</tbody></table>
<aside>
ğŸ’¡

<p>è¿™é‡Œé‡ç‚¹è¦è¯´æ˜çš„æ˜¯è§‚å¯Ÿè¡¨è¾¾å¼ï¼Œè§‚å¯Ÿè¡¨è¾¾å¼çš„æ„æˆä¸»è¦ç”± ognl è¡¨è¾¾å¼ç»„æˆï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿™æ ·å†™<code>&quot;&#123;params,returnObj&#125;&quot;</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ªåˆæ³•çš„ ognl è¡¨è¾¾å¼ï¼Œéƒ½èƒ½è¢«æ­£å¸¸æ”¯æŒã€‚</p>
<p>è§‚å¯Ÿçš„ç»´åº¦ä¹Ÿæ¯”è¾ƒå¤šï¼Œä¸»è¦ä½“ç°åœ¨å‚æ•°Â <code>advice</code>Â çš„æ•°æ®ç»“æ„ä¸Šã€‚<code>Advice</code>Â å‚æ•°æœ€ä¸»è¦æ˜¯å°è£…äº†é€šçŸ¥èŠ‚ç‚¹çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p>è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/advice-class.html"><strong>è¡¨è¾¾å¼æ ¸å¿ƒå˜é‡</strong></a>ä¸­å…³äºè¯¥èŠ‚ç‚¹çš„æè¿°ã€‚</p>
<ul>
<li><p>ç‰¹æ®Šç”¨æ³•è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/arthas/issues/71"><strong>https://github.com/alibaba/arthas/issues/71</strong></a></p>
</li>
<li><p>OGNL è¡¨è¾¾å¼å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://commons.apache.org/dormant/commons-ognl/language-guide.html"><strong>https://commons.apache.org/dormant/commons-ognl/language-guide.html</strong></a></p>
</aside>
</li>
<li><p><strong>ä½¿ç”¨æ¡ˆä¾‹</strong></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä½¿ç”¨stackå‘½ä»¤è·Ÿè¸ªprimeFactorsæ–¹æ³•</span></span><br><span class="line">[arthas@8161]$ stack demo.MathGame primeFactors</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 88 ms, listenerId: 14</span><br><span class="line">ts=2025-06-07 09:53:24.073;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br><span class="line">ts=2025-06-07 09:53:25.077;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä½¿ç”¨OGNLè¡¨è¾¾å¼ï¼Œè¿‡æ»¤ç¬¬ä¸€ä¸ªå‚æ•°å€¼å°äº0çš„æ–¹æ³•è°ƒç”¨æƒ…å†µï¼Œå¹¶ä¸”åªæ‰“å°ä¸¤ä¸ªä¿¡æ¯æ•°æ®</span></span><br><span class="line">[arthas@8161]$ stack demo.MathGame primeFactors <span class="string">&#x27;params[0]&lt;0&#x27;</span> -n 2</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 85 ms, listenerId: 15</span><br><span class="line">ts=2025-06-07 09:53:57.220;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br><span class="line">ts=2025-06-07 09:53:58.223;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br><span class="line">Command execution <span class="built_in">times</span> exceed <span class="built_in">limit</span>: 2, so <span class="built_in">command</span> will <span class="built_in">exit</span>. You can <span class="built_in">set</span> it with -n option.</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä½¿ç”¨OGNLè¡¨è¾¾å¼ï¼Œè¿‡æ»¤è€—æ—¶å¤§äº2æ¯«ç§’çš„ä¿¡æ¯</span></span><br><span class="line">[arthas@8161]$ stack demo.MathGame primeFactors <span class="string">&#x27;#cost&gt;2&#x27;</span></span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 84 ms, listenerId: 17</span><br><span class="line">ts=2025-06-07 09:56:40.903;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br><span class="line">ts=2025-06-07 09:56:44.919;thread_name=main;<span class="built_in">id</span>=1;is_daemon=<span class="literal">false</span>;priority=5;TCCL=jdk.internal.loader.ClassLoaders<span class="variable">$AppClassLoader</span>@4b85612c</span><br><span class="line">    @demo.MathGame.primeFactors()</span><br><span class="line">        at demo.MathGame.run(MathGame.java:24)</span><br><span class="line">        at demo.MathGame.main(null:16)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-ttå‘½ä»¤"><a href="#5-ttå‘½ä»¤" class="headerlink" title="5. ttå‘½ä»¤"></a>5. <strong>ttå‘½ä»¤</strong></h2><p>æ–¹æ³•æ‰§è¡Œæ•°æ®çš„æ—¶ç©ºéš§é“ï¼Œè®°å½•ä¸‹æŒ‡å®šæ–¹æ³•æ¯æ¬¡è°ƒç”¨çš„å…¥å‚å’Œè¿”å›ä¿¡æ¯ï¼Œå¹¶èƒ½å¯¹è¿™äº›ä¸åŒçš„æ—¶é—´ä¸‹è°ƒç”¨è¿›è¡Œè§‚æµ‹</p>
<p><code>watch</code>Â è™½ç„¶å¾ˆæ–¹ä¾¿å’Œçµæ´»ï¼Œä½†éœ€è¦æå‰æƒ³æ¸…æ¥šè§‚å¯Ÿè¡¨è¾¾å¼çš„æ‹¼å†™ï¼Œè¿™å¯¹æ’æŸ¥é—®é¢˜è€Œè¨€è¦æ±‚å¤ªé«˜ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ¸…æ¥šé—®é¢˜å‡ºè‡ªäºä½•æ–¹ï¼Œåªèƒ½é è››ä¸é©¬è¿¹è¿›è¡ŒçŒœæµ‹ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å¦‚æœèƒ½è®°å½•ä¸‹å½“æ—¶æ–¹æ³•è°ƒç”¨çš„æ‰€æœ‰å…¥å‚å’Œè¿”å›å€¼ã€æŠ›å‡ºçš„å¼‚å¸¸ä¼šå¯¹æ•´ä¸ªé—®é¢˜çš„æ€è€ƒä¸åˆ¤æ–­éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<p>äºæ˜¯ä¹ï¼ŒTimeTunnel å‘½ä»¤å°±è¯ç”Ÿäº†ã€‚</p>
<aside>
ğŸ’¡

<ol>
<li>tt å‘½ä»¤çš„å®ç°æ˜¯ï¼šæŠŠå‡½æ•°çš„å…¥å‚&#x2F;è¿”å›å€¼ç­‰ï¼Œä¿å­˜åˆ°ä¸€ä¸ª<code>Map&lt;Integer, TimeFragment&gt;</code>é‡Œï¼Œé»˜è®¤çš„å¤§å°æ˜¯ 100ã€‚</li>
<li>tt ç›¸å…³åŠŸèƒ½åœ¨ä½¿ç”¨å®Œä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå¦åˆ™é•¿æ—¶é—´å¯èƒ½å¯¼è‡´OOMã€‚é€€å‡º arthas ä¸ä¼šè‡ªåŠ¨æ¸…é™¤ tt çš„ç¼“å­˜ map</aside></li>
</ol>
<ul>
<li>å‘½ä»¤å‚æ•°è§£æ<ul>
<li><p><code>t</code></p>
<p>  tt å‘½ä»¤æœ‰å¾ˆå¤šä¸ªä¸»å‚æ•°ï¼Œ<code>-t</code>Â å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚è¿™ä¸ªå‚æ•°çš„è¡¨æ˜å¸Œæœ›è®°å½•ä¸‹ç±»Â <code>*Test</code>Â çš„Â <code>print</code>Â æ–¹æ³•çš„æ¯æ¬¡æ‰§è¡Œæƒ…å†µã€‚</p>
</li>
<li><p><code>n 3</code></p>
<p>  å½“ä½ æ‰§è¡Œä¸€ä¸ªè°ƒç”¨é‡ä¸é«˜çš„æ–¹æ³•æ—¶å¯èƒ½ä½ è¿˜èƒ½æœ‰è¶³å¤Ÿçš„æ—¶é—´ç”¨Â <code>CTRL+C</code>Â ä¸­æ–­ tt å‘½ä»¤è®°å½•çš„è¿‡ç¨‹ï¼Œä½†å¦‚æœé‡åˆ°è°ƒç”¨é‡éå¸¸å¤§çš„æ–¹æ³•ï¼Œç¬é—´å°±èƒ½å°†ä½ çš„ JVM å†…å­˜æ’‘çˆ†ã€‚</p>
<p>  æ­¤æ—¶ä½ å¯ä»¥é€šè¿‡Â <code>-n</code>Â å‚æ•°æŒ‡å®šä½ éœ€è¦è®°å½•çš„æ¬¡æ•°ï¼Œå½“è¾¾åˆ°è®°å½•æ¬¡æ•°æ—¶ Arthas ä¼šä¸»åŠ¨ä¸­æ–­ tt å‘½ä»¤çš„è®°å½•è¿‡ç¨‹ï¼Œé¿å…äººå·¥æ“ä½œæ— æ³•åœæ­¢çš„æƒ…å†µã€‚</p>
</li>
<li><p><code>m 1</code></p>
<p>  é€šè¿‡Â <code>-m</code>Â å‚æ•°æŒ‡å®š Class åŒ¹é…çš„æœ€å¤§æ•°é‡ï¼Œé˜²æ­¢åŒ¹é…åˆ°çš„ Class æ•°é‡å¤ªå¤šå¯¼è‡´ JVM æŒ‚èµ·ï¼Œé»˜è®¤å€¼æ˜¯ 50ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 id="5-1-æ‰§è¡Œå‘½ä»¤ï¼štt-t-demo-MathGame-primeFactors"><a href="#5-1-æ‰§è¡Œå‘½ä»¤ï¼štt-t-demo-MathGame-primeFactors" class="headerlink" title="5.1 æ‰§è¡Œå‘½ä»¤ï¼štt -t demo.MathGame primeFactors"></a>5.1 æ‰§è¡Œå‘½ä»¤ï¼štt -t demo.MathGame primeFactors</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[arthas@8161]$ tt -t demo.MathGame primeFactors</span><br><span class="line">Press Q or Ctrl+C to abort.</span><br><span class="line">Affect(class count: 1 , method count: 1) cost <span class="keyword">in</span> 85 ms, listenerId: 18</span><br><span class="line"> INDEX            TIMESTAMP                                 COST(ms)             IS-RET          IS-EXP           OBJECT                         CLASS                                                          METHOD                                                        </span><br><span class="line">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"> 1000             2025-06-07 10:07:44.617                   0.227622             <span class="literal">false</span>           <span class="literal">true</span>             0x589838eb                     MathGame                                                       primeFactors                                                  </span><br><span class="line"> 1001             2025-06-07 10:07:45.621                   0.07812              <span class="literal">false</span>           <span class="literal">true</span>             0x589838eb                     MathGame                                                       primeFactors                                                  </span><br><span class="line"> 1002             2025-06-07 10:07:46.623                   0.091644             <span class="literal">false</span>           <span class="literal">true</span>             0x589838eb                     MathGame                                                       primeFactors                                                  </span><br><span class="line"> 1003             2025-06-07 10:07:47.628                   3.676343             <span class="literal">true</span>            <span class="literal">false</span>            0x589838eb                     MathGame                                                       primeFactors                                                  </span><br><span class="line"> 1004             2025-06-07 10:07:48.631                   0.05122              <span class="literal">false</span>           <span class="literal">true</span>             0x589838eb                     MathGame                                                       primeFactors  </span><br></pre></td></tr></table></figure>

<ul>
<li>è¡¨æ ¼å­—æ®µè¯´æ˜</li>
</ul>
<table>
<thead>
<tr>
<th>è¡¨æ ¼å­—æ®µ</th>
<th>å­—æ®µè§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td>INDEX</td>
<td>æ—¶é—´ç‰‡æ®µè®°å½•ç¼–å·ï¼Œæ¯ä¸€ä¸ªç¼–å·ä»£è¡¨ç€ä¸€æ¬¡è°ƒç”¨ï¼Œåç»­ tt è¿˜æœ‰å¾ˆå¤šå‘½ä»¤éƒ½æ˜¯åŸºäºæ­¤ç¼–å·æŒ‡å®šè®°å½•æ“ä½œï¼Œéå¸¸é‡è¦ã€‚</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>æ–¹æ³•æ‰§è¡Œçš„æœ¬æœºæ—¶é—´ï¼Œè®°å½•äº†è¿™ä¸ªæ—¶é—´ç‰‡æ®µæ‰€å‘ç”Ÿçš„æœ¬æœºæ—¶é—´</td>
</tr>
<tr>
<td>COST(ms)</td>
<td>æ–¹æ³•æ‰§è¡Œçš„è€—æ—¶</td>
</tr>
<tr>
<td>IS-RET</td>
<td>æ–¹æ³•æ˜¯å¦ä»¥æ­£å¸¸è¿”å›çš„å½¢å¼ç»“æŸ</td>
</tr>
<tr>
<td>IS-EXP</td>
<td>æ–¹æ³•æ˜¯å¦ä»¥æŠ›å¼‚å¸¸çš„å½¢å¼ç»“æŸ</td>
</tr>
<tr>
<td>OBJECT</td>
<td>æ‰§è¡Œå¯¹è±¡çš„<code>hashCode()</code>ï¼Œæ³¨æ„ï¼Œæ›¾ç»æœ‰äººè¯¯è®¤ä¸ºæ˜¯å¯¹è±¡åœ¨ JVM ä¸­çš„å†…å­˜åœ°å€ï¼Œä½†å¾ˆé—æ†¾ä»–ä¸æ˜¯ã€‚ä½†ä»–èƒ½å¸®åŠ©ä½ ç®€å•çš„æ ‡è®°å½“å‰æ‰§è¡Œæ–¹æ³•çš„ç±»å®ä½“</td>
</tr>
<tr>
<td>CLASS</td>
<td>æ‰§è¡Œçš„ç±»å</td>
</tr>
<tr>
<td>METHOD</td>
<td>æ‰§è¡Œçš„æ–¹æ³•å</td>
</tr>
</tbody></table>
<ul>
<li><p>æ¡ä»¶è¡¨è¾¾å¼</p>
<p>  ä¸çŸ¥é“å¤§å®¶æ˜¯å¦æœ‰åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»¥ä¸‹å›°æƒ‘</p>
<ul>
<li>Arthas ä¼¼ä¹å¾ˆéš¾åŒºåˆ†å‡ºé‡è½½çš„æ–¹æ³•</li>
<li>æˆ‘åªéœ€è¦è§‚å¯Ÿç‰¹å®šå‚æ•°ï¼Œä½†æ˜¯ tt å´å…¨éƒ¨éƒ½ç»™æˆ‘è®°å½•äº†ä¸‹æ¥</li>
</ul>
<p>  æ¡ä»¶è¡¨è¾¾å¼ä¹Ÿæ˜¯ç”¨Â <code>OGNL</code>Â æ¥ç¼–å†™ï¼Œæ ¸å¿ƒçš„åˆ¤æ–­å¯¹è±¡ä¾ç„¶æ˜¯Â <code>Advice</code>Â å¯¹è±¡ã€‚é™¤äº†Â <code>tt</code>Â å‘½ä»¤ä¹‹å¤–ï¼Œ<code>watch</code>ã€<code>trace</code>ã€<code>stack</code>Â å‘½ä»¤ä¹Ÿéƒ½æ”¯æŒæ¡ä»¶è¡¨è¾¾å¼ã€‚
  </p>
</li>
<li><p>è§£å†³æ–¹æ³•é‡è½½</p>
<p>  <code>tt -t *Test print params.length==1</code></p>
<p>  é€šè¿‡åˆ¶å®šå‚æ•°ä¸ªæ•°çš„å½¢å¼è§£å†³ä¸åŒçš„æ–¹æ³•ç­¾åï¼Œå¦‚æœå‚æ•°ä¸ªæ•°ä¸€æ ·ï¼Œä½ è¿˜å¯ä»¥è¿™æ ·å†™</p>
<p>  <code>tt -t *Test print &#39;params[1] instanceof Integer&#39;</code></p>
</li>
<li><p>è§£å†³æŒ‡å®šå‚æ•°</p>
<p>  <code>tt -t *Test print params[0].mobile==&quot;13989838402&quot;</code></p>
</li>
<li><p>æ„æˆæ¡ä»¶è¡¨è¾¾å¼çš„Â <code>Advice</code>Â å¯¹è±¡</p>
<p>  å‰è¾¹çœ‹åˆ°äº†å¾ˆå¤šæ¡ä»¶è¡¨è¾¾å¼ä¸­ï¼Œéƒ½ä½¿ç”¨äº†Â <code>params[0]</code>ï¼Œæœ‰å…³è¿™ä¸ªå˜é‡çš„ä»‹ç»ï¼Œè¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/doc/advice-class.html"><strong>è¡¨è¾¾å¼æ ¸å¿ƒå˜é‡</strong></a></p>
</li>
</ul>
<h3 id="5-2-æŸ¥çœ‹è°ƒç”¨ä¿¡æ¯"><a href="#5-2-æŸ¥çœ‹è°ƒç”¨ä¿¡æ¯" class="headerlink" title="5.2 æŸ¥çœ‹è°ƒç”¨ä¿¡æ¯"></a>5.2 <strong>æŸ¥çœ‹è°ƒç”¨ä¿¡æ¯</strong></h3><p>å¯¹äºå…·ä½“ä¸€ä¸ªæ—¶é—´ç‰‡çš„ä¿¡æ¯è€Œè¨€ï¼Œä½ å¯ä»¥é€šè¿‡Â <code>-i</code>Â å‚æ•°åè¾¹è·Ÿç€å¯¹åº”çš„Â <code>INDEX</code>Â ç¼–å·æŸ¥çœ‹åˆ°ä»–çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[arthas@8161]$ tt -i 1004</span><br><span class="line"> INDEX            1004                                                                                                                                                                                                                                                        </span><br><span class="line"> GMT-CREATE       2025-06-07 10:07:48.631                                                                                                                                                                                                                                     </span><br><span class="line"> COST(ms)         0.05122                                                                                                                                                                                                                                                     </span><br><span class="line"> OBJECT           0x589838eb                                                                                                                                                                                                                                                  </span><br><span class="line"> CLASS            demo.MathGame                                                                                                                                                                                                                                               </span><br><span class="line"> METHOD           primeFactors                                                                                                                                                                                                                                                </span><br><span class="line"> IS-RETURN        <span class="literal">false</span>                                                                                                                                                                                                                                                       </span><br><span class="line"> IS-EXCEPTION     <span class="literal">true</span>                                                                                                                                                                                                                                                        </span><br><span class="line"> PARAMETERS[0]    @Integer[-67793]                                                                                                                                                                                                                                            </span><br><span class="line"> THROW-EXCEPTION  java.lang.IllegalArgumentException: number is: -67793, need &gt;= 2                                                                                                                                                                                            </span><br><span class="line">                  	at demo.MathGame.primeFactors(MathGame.java:46)                                                                                                                                                                                                            </span><br><span class="line">                  	at demo.MathGame.run(MathGame.java:24)                                                                                                                                                                                                                     </span><br><span class="line">                  	at demo.MathGame.main(Unknown Source)                                                                                                                                                                                                                      </span><br><span class="line">Affect(row-cnt:1) cost <span class="keyword">in</span> 3 ms.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-3-é‡åšä¸€æ¬¡è°ƒç”¨"><a href="#5-3-é‡åšä¸€æ¬¡è°ƒç”¨" class="headerlink" title="5.3 é‡åšä¸€æ¬¡è°ƒç”¨"></a><strong>5.3 é‡åšä¸€æ¬¡è°ƒç”¨</strong></h3><p>å½“ä½ ç¨ç¨åšäº†ä¸€äº›è°ƒæ•´ä¹‹åï¼Œä½ å¯èƒ½éœ€è¦å‰ç«¯ç³»ç»Ÿé‡æ–°è§¦å‘ä¸€æ¬¡ä½ çš„è°ƒç”¨ï¼Œæ­¤æ—¶å¾—æ±‚çˆ·çˆ·å‘Šå¥¶å¥¶çš„éœ€è¦å‰ç«¯é…åˆè”è°ƒçš„åŒå­¦å†æ¬¡å‘èµ·ä¸€æ¬¡è°ƒç”¨ã€‚è€Œæœ‰äº›åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªè°ƒç”¨ä¸æ˜¯è¿™ä¹ˆå¥½è§¦å‘çš„ã€‚</p>
<p><code>tt</code>Â å‘½ä»¤ç”±äºä¿å­˜äº†å½“æ—¶è°ƒç”¨çš„æ‰€æœ‰ç°åœºä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå·±ä¸»åŠ¨å¯¹ä¸€ä¸ªÂ <code>INDEX</code>Â ç¼–å·çš„æ—¶é—´ç‰‡è‡ªä¸»å‘èµ·ä¸€æ¬¡è°ƒç”¨ï¼Œä»è€Œè§£æ”¾ä½ çš„æ²Ÿé€šæˆæœ¬ã€‚æ­¤æ—¶ä½ éœ€è¦Â <code>-p</code>Â å‚æ•°ã€‚é€šè¿‡Â <code>--replay-times</code>Â æŒ‡å®š è°ƒç”¨æ¬¡æ•°ï¼Œé€šè¿‡Â <code>--replay-interval</code>Â æŒ‡å®šå¤šæ¬¡è°ƒç”¨é—´éš”(å•ä½ ms, é»˜è®¤ 1000ms)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[arthas@8161]$ tt -i 1004 -p</span><br><span class="line"> RE-INDEX         1004                                                                                                                                                                                                                                                        </span><br><span class="line"> GMT-REPLAY       2025-06-07 10:15:36.439                                                                                                                                                                                                                                     </span><br><span class="line"> OBJECT           0x589838eb                                                                                                                                                                                                                                                  </span><br><span class="line"> CLASS            demo.MathGame                                                                                                                                                                                                                                               </span><br><span class="line"> METHOD           primeFactors                                                                                                                                                                                                                                                </span><br><span class="line"> PARAMETERS[0]    @Integer[-67793]                                                                                                                                                                                                                                            </span><br><span class="line"> IS-RETURN        <span class="literal">false</span>                                                                                                                                                                                                                                                       </span><br><span class="line"> IS-EXCEPTION     <span class="literal">true</span>                                                                                                                                                                                                                                                        </span><br><span class="line"> THROW-EXCEPTION  java.lang.IllegalArgumentException: number is: -67793, need &gt;= 2                                                                                                                                                                                            </span><br><span class="line">                  	at demo.MathGame.primeFactors(MathGame.java:46)                                                                                                                                                                                                            </span><br><span class="line">                  	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                                                          </span><br><span class="line">                  	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)                                                                                                                                                        </span><br><span class="line">                  	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                                                                                                                                                </span><br><span class="line">                  	at java.base/java.lang.reflect.Method.invoke(Method.java:566)                                                                                                                                                                                              </span><br><span class="line">                  	at com.taobao.arthas.core.advisor.ArthasMethod.invoke(ArthasMethod.java:155)                                                                                                                                                                               </span><br><span class="line">                  	at com.taobao.arthas.core.command.monitor200.TimeTunnelCommand.processPlay(TimeTunnelCommand.java:517)                                                                                                                                                     </span><br><span class="line">                  	at com.taobao.arthas.core.command.monitor200.TimeTunnelCommand.process(TimeTunnelCommand.java:278)                                                                                                                                                         </span><br><span class="line">                  	at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.process(AnnotatedCommandImpl.java:82)                                                                                                                                                    </span><br><span class="line">                  	at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.access<span class="variable">$100</span>(AnnotatedCommandImpl.java:18)                                                                                                                                                 </span><br><span class="line">                  	at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl<span class="variable">$ProcessHandler</span>.handle(AnnotatedCommandImpl.java:111)                                                                                                                                     </span><br><span class="line">                  	at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl<span class="variable">$ProcessHandler</span>.handle(AnnotatedCommandImpl.java:108)                                                                                                                                     </span><br><span class="line">                  	at com.taobao.arthas.core.shell.system.impl.ProcessImpl<span class="variable">$CommandProcessTask</span>.run(ProcessImpl.java:385)                                                                                                                                                       </span><br><span class="line">                  	at java.base/java.util.concurrent.Executors<span class="variable">$RunnableAdapter</span>.call(Executors.java:515)                                                                                                                                                                       </span><br><span class="line">                  	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)                                                                                                                                                                                      </span><br><span class="line">                  	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor<span class="variable">$ScheduledFutureTask</span>.run(ScheduledThreadPoolExecutor.java:304)                                                                                                                                </span><br><span class="line">                  	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)                                                                                                                                                               </span><br><span class="line">                  	at java.base/java.util.concurrent.ThreadPoolExecutor<span class="variable">$Worker</span>.run(ThreadPoolExecutor.java:628)                                                                                                                                                               </span><br><span class="line">                  	at java.base/java.lang.Thread.run(Thread.java:834)                                                                                                                                                                                                         </span><br><span class="line">Time fragment[1004] successfully replayed 1 <span class="built_in">times</span>.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Arthas/" rel="tag"># Arthas</a>
              <a href="/tags/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/" rel="tag"># Arthasè¯Šæ–­å·¥å…·</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E5%9B%9B)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89class%20classloader%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/" rel="prev" title="Arthasè¯Šæ–­å·¥å…·(å››)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰class&#x2F;classloaderç›¸å…³å‘½ä»¤">
                  <i class="fa fa-angle-left"></i> Arthasè¯Šæ–­å·¥å…·(å››)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰class/classloaderç›¸å…³å‘½ä»¤
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Arthas%E5%BA%94%E7%94%A8(Java)%E8%AF%8A%E6%96%AD%E5%88%A9%E5%99%A8/Arthas%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7(%E5%85%AD)Arthas%EF%BC%88%E9%98%BF%E5%B0%94%E8%90%A8%E6%96%AF%EF%BC%89options%E5%85%A8%E5%B1%80%E5%BC%80%E5%85%B3/" rel="next" title="Arthasè¯Šæ–­å·¥å…·(å…­)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰optionså…¨å±€å¼€å…³">
                  Arthasè¯Šæ–­å·¥å…·(å…­)Arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰optionså…¨å±€å¼€å…³ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Panda Yuan</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
